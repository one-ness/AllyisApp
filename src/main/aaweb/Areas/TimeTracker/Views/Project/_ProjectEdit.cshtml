@model AllyisApps.ViewModels.EditProjectViewModel
@using AllyisApps.ViewModels;
@using AllyisApps.Extensions.IEnumerableExtensions;

@{
    AjaxOptions ao = new AjaxOptions
    {
        UpdateTargetId = "OrgEditWrap"
    };
    Layout = "~/Views/Shared/_LayoutModal.cshtml";
    string left = "col-xs-4 text-right";
    string right = "col-xs-8";
    string action = ViewBag.Action;
}

<div>
    <div>
        @using (Html.BeginForm(action, "Project", FormMethod.Post, new { @class = "", id = "ProjectForm", role = "form", name = "EditForm", onsubmit = "return selectAll()" }))
        {
            <div>
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(true)
                <div class="form-group">
                    <label for="Name">@AllyisApps.Resources.TimeTracker.Views.Project.Strings.Name</label>
                    @Html.TextBoxFor(m => m.ProjectName, new { @class = "form-control" })
                    @Html.ValidationMessageFor(x => x.ProjectName)
                </div>
                <div id="swapper-ui" class="swapper-ui">
                    <div class="left">
                        <label>@AllyisApps.Resources.TimeTracker.Views.Project.Strings.OffProj</label>
                        <input type="text" placeholder=@AllyisApps.Resources.TimeTracker.Views.Project.Strings.SearchPlaceholder class="form-control" />
                        @*
                            Create a multi-select list that is populated from SubscriptionUsers
                            Uses Javascript and the add/remove buttons to add and remove items from this listbox
                        *@
                        @Html.ListBoxFor(m => m.SubscriptionUsers, new MultiSelectList(Model.SubscriptionUsers, "UserId", "Name"), new { @name = "Excluded", @id = "excluded-users", @class = "filter-list", @Multiple = "multiple" })
                    </div>
                    <div class="actions">
                        <a href="javascript: moveSelectedProjectEditModal('in')" class="btn btn-default move-in">
                            <i class="fa fa-lg fa-arrow-right"></i>
                        </a>
                        <a href="javascript: moveSelectedProjectEditModal('out')" class="btn btn-default move-out">
                            <i class="fa fa-lg fa-arrow-left"></i>
                        </a>
                    </div>
                    <div class="right">
                        <label>@AllyisApps.Resources.TimeTracker.Views.Project.Strings.OffProj</label>
                        <input type="text" placeholder="@AllyisApps.Resources.TimeTracker.Views.Project.Strings.SearchPlaceholder" class="form-control" />
                        @*
                            Create a multi-select list that is populated from ProjectUsers and binds all selected items to SelectedProjectUserIds
                            On Submit, all items in this list become selected, so the whole list is bound to the model
                            Items are added and removed from this list via Javascript and the add / remove buttons
                        *@
                        @Html.ListBoxFor(m => m.SelectedProjectUserIds, new MultiSelectList(Model.ProjectUsers, "UserId", "Name"), new { @name = "Included", @id = "included-users", @class = "filter-list", @Multiple = "multiple" })

                    </div>
                </div>
                <div class="form-group">
                    <div class="col-xs-6 text-left">
                        <label for="daterange" style="text-align:center">@AllyisApps.Resources.TimeTracker.Views.Project.Strings.DateRange</label>
                    </div>
                    <div class="col-xs-6 text-right">
                        <label for="price" style="text-align:center">@AllyisApps.Resources.TimeTracker.Views.Project.Strings.PriceType</label>
                    </div>
                </div>
                <div>
                    <div class="col-xs-8 text-left">
                        <input type="hidden" id="DateRangeStart" name="DateRangeStart" value="@Model.StartDate.ToString("MM/dd/yyyy")" />
                        <input type="hidden" id="DateRangeEnd" name="DateRangeEnd" value="@Model.EndDate.ToString("MM/dd/yyyy")" />
                        <input type="text" name="daterange" id="daterange" class="form-control" value="" />
                    </div>

                    @{   
                        <div class="col-xs-4 text-right">
                            @Html.RadioButtonFor(m => m.PriceType, AllyisApps.Resources.TimeTracker.Views.Project.Strings.Hourly, new { @checked = "checked" }) @AllyisApps.Resources.TimeTracker.Views.Project.Strings.Hourly <br />
                            @Html.RadioButtonFor(m => m.PriceType, AllyisApps.Resources.TimeTracker.Views.Project.Strings.Fixed) @AllyisApps.Resources.TimeTracker.Views.Project.Strings.Fixed
                        </div>
                    }
                </div>
                @Html.HiddenFor(m => m.ParentCustomerId)
                @Html.HiddenFor(m => m.ProjectId)
            </div>
            <br />
            <br />
            <br />
            <div class="modal-footer">
                <input type="button" class="btn btn-default" value=@AllyisApps.Resources.TimeTracker.Views.Project.Strings.Cancel onclick="location='@Url.Action("Index", "Customer")'" />
                <input type="submit" value=@AllyisApps.Resources.TimeTracker.Views.Project.Strings.Save class="btn btn-primary" id="submitProject" />
            </div>    }
    </div><!-- /.modal-content -->
</div><!-- /.modal-dialog -->

@section css {
    <link rel="stylesheet" type="text/css" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="~/Content/jquery.comiseo.daterangepicker.css" />
}