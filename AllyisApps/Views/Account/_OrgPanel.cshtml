@using AllyisApps.ViewModels.Auth
@using AllyisApps.Services

@model OrgWithSubscriptionsForUserViewModel

@{
    Organization details = Model.OrgInfo;
    string title = details.Name;
    string subtitle = details.SiteUrl ?? "";
    var cityState = details.City != null && details.State != null ? details.City + ", " + details.State : details.City + details.State;
}
<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h2 style="margin-top: 0px; margin-bottom: 0px;">
                    @title
                    @if (Model.CanEditOrganization)
                    {
                        <a href="@Url.Action(ActionConstants.Manage, ControllerConstants.Account, new { id = Model.OrgInfo.OrganizationId })" title="@Strings.EditOrganization" class="pull-right text-muted">
                            <i class="fa fa-cog  fa-lg"></i>
                        </a>
                    }
                </h2>
            </div>
            <div class="panel-body">
                <div class="col-sm-8 index-details">
                    <p>
                        <label>@Strings.PhoneNumber:</label>
                        @details.PhoneNumber
                    </p>
                    <p>
                        <label>@Strings.Address:</label>
                        <span class="address-row">@details.Address</span>
                        <span class="address-row">@cityState @details.PostalCode</span>
                    </p>
                </div>
                <div class="col-sm-4 index-details">
                    <p>
                        <label>@Strings.Website:</label>
                        <a href="@subtitle" target="_blank">@subtitle</a>
                    </p>
                    <p>
                        <label>@Strings.Fax:</label>
                        @details.FaxNumber
                    </p>
                </div>
                <div class="col-md-8 col-md-push-2" style="height: 100%; display: flex; flex-wrap: wrap; justify-content: space-around; clear: both">
					@foreach (SubscriptionDisplayViewModel sub in Model.Subscriptions)
					{
						<div class="panel-wrap panel-wrap-one" style="width: 300px;">
							<a href="@Url.Action(ActionConstants.ApplicationRedirect, ControllerConstants.Account, new { id = Model.OrgInfo.OrganizationId })" style="text-decoration: none">
								<div class="panel panel-default">
									<div class="panel-heading" style="display: table; width: 100%; height: 100%;">
										<div class="left" style="display: table-cell; width: 30%; text-align: center; vertical-align: middle;">
											<img src="~/@string.Format("Content/icons/{0}.png", sub.ProductName)" alt="@sub.ProductName" />
										</div>
										<div class="right" style="display: table-cell">
											<h3>
												@sub.ProductDisplayName
											</h3>
											<p>
												@sub.ProductDescription
											</p>
										</div>
									</div>
								</div>
							</a>
						</div>
					}
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
</div>
