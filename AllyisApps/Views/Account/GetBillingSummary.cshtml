@model IEnumerable<BillingHistoryItemViewModel>

@{
    ViewBag.TitleBar = Strings.BillingHistory;
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1 class="text-center">@Strings.BillingHistory</h1>

<table class="ovrd-table table" style="table-layout: fixed">
    <thead>
        <tr>
            <th class="ovrd-col-xs-2 col-xs-2 col">@Strings.Date</th>
            <th class="ovrd-col-xs-5 col-xs-5 col">@Strings.Description</th>
            <th class="ovrd-col-xs-3 col-xs-3 col">@Strings.Product</th>
            <th class="ovrd-col-xs-2 col-xs-2 col">@Strings.User</th>
        </tr>
    </thead>

    @foreach (BillingHistoryItemViewModel item in Model)
    {
        <tr>
            <td class="ovrd-col-xs-2 col-xs-2 col bhiDate" value="">@item.Date</td>
            <td class="ovrd-col-xs-5 col-xs-5 col">@item.Description</td>
            <td class="ovrd-col-xs-3 col-xs-3 col">@item.ProductName</td>
            <td class="ovrd-col-xs-2 col-xs-2 col" style="overflow: hidden">@item.Username</td>
        </tr>
    }
</table>

<script type="text/javascript">
    function formatDate (date) {
        var parts = date.toString().split(' ');
        return parts[4] + " " + date.getMonth() + "/" + parts[2] + "/" + parts[3];
    }

    window.onload = function () {
        [].forEach.call(document.getElementsByClassName('bhiDate'), function (elem) {
            elem.innerHTML = formatDate(new Date(+elem.innerHTML));
        });
    }
</script>