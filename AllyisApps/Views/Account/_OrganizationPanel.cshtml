@using AllyisApps.ViewModels.Auth
@using AllyisApps.Services.Billing

@model AccountIndexViewModel.OrganizationViewModel
@{
	string title = Model.OrganizationName;
	string subtitle = Model.SiteUrl ?? "";
	var OrgcityState = Model.City != null && Model.State != null ? Model.City + ", " + Model.State : Model.City + Model.State;
}
<div class="row">
	<div class="ovrd-col-md-12 col-md-12 col">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h2 style="margin-top: 0px; margin-bottom: 0px;">
					@title
					@if (Model.IsManageAllowed)
					{
						<a href="@Url.Action(ActionConstants.ManageOrg, ControllerConstants.Account, new { id = Model.OrganizationId })" title="@Strings.EditOrganization" class="pull-right text-muted">
							<i class="ovrd-fa fa ovrd-fa-cog fa-cog ovrd-fa-lg fa-lg"></i>
						</a>
					}
				</h2>
			</div>
			<div class="panel-body">
				<div class="ovrd-col-sm-8 col-sm-8 col index-details">
					<p>
						<label>@Strings.PhoneNumber:</label>
						@Model.PhoneNumber
					</p>
					<p>
						<label>@Strings.Address:</label>
						<span class="address-row">@Model.Address1</span>
						<span class="address-row">@OrgcityState @Model.PostalCode</span>
					</p>
				</div>
				<div class="ovrd-col-sm-4 col-sm-4 col index-details">
					<p>
						<label>@Strings.Website:</label>
						@{
							string orgWebSite = subtitle;
							if (!(subtitle == null || subtitle == ""))
							{
								if (!subtitle.StartsWith("http"))
								{
									orgWebSite = "http://" + subtitle;
								}
								<a href="@orgWebSite" target="_blank">@subtitle</a>
							}
						}
					</p>
					<p>
						<label>@Strings.Fax:</label>
						@Model.FaxNumber
					</p>
				</div>
				<div class="ovrd-col-md-12 col-md-12 col" style="height: 100%; margin-top:15px; display: flex; flex-wrap: wrap; justify-content: space-around; clear: both;">
					@foreach (AccountIndexViewModel.OrganizationViewModel.SubscriptionViewModel sub in Model.Subscriptions)
					{
						<div class="square-box">

							@{
								string route = "";
								switch (sub.ProductId)
								{
									case ProductIdEnum.None:
										break;
									case ProductIdEnum.AllyisApps:
										break;
									case ProductIdEnum.TimeTracker:
										route = Url.RouteUrl(RouteNameConstants.TimeTrackerNoIndex, new { subscriptionId = @sub.SubscriptionId, controller = ControllerConstants.TimeEntry });
										break;
									case ProductIdEnum.ExpenseTracker:
										route = Url.RouteUrl(RouteNameConstants.ExpenseTracker, new { subscriptionId = @sub.SubscriptionId, controller = ControllerConstants.Expense });
										break;
									case ProductIdEnum.StaffingManager:
										break;
									default:
										break;
								}
							}

							<a href="@(route)" style="text-decoration: none">
								<div class="panel panel-default">
									<div class="btn default" style="text-align:center; margin:10px;">
										<div class="center-block" text-align: center; vertical-align: middle;" style="margin-top:5px;">
											<img src="~/@sub.IconUrl" alt="@sub.ProductName" />
										</div>

										<h3>
											@sub.ProductName
										</h3>
										<p>
											@sub.SubscriptionName
										</p>
									</div>
								</div>
							</a>
						</div>
								}
				</div>
			</div>
		</div>
	</div>
</div>

<div class="row">
</div>