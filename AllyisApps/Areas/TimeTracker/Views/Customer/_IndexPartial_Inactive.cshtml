@using AllyisApps.ViewModels.TimeTracker.Customer;
@using AllyisApps.ViewModels.TimeTracker.Project;
@using AllyisApps.Services;

@model ManageCustomerViewModel

<div class="flexbox-row flexbox-row-2-col-collapse">

	<div class="ovrd-panel panel ovrd-panel-info panel-info" style="position: relative">
		<div class="ovrd-panel-heading panel-heading">
			<h1 class="ovrd-panel-title panel-title">@Strings.CustomerList</h1>
		</div>
		<div class="ovrd-panel-body panel-body list-group" id="Customers">
			@foreach (CustomerProjectViewModel customer in Model.InactiveCustomerAndProjects)
			{
				if (customer.CustomerInfo.IsActive.Value)
				{
					<a onclick="PopulateInactiveProjects('@customer.CustomerInfo.CustomerId', 1)" class="list-group-item" id="inactive-@customer.CustomerInfo.CustomerId">
						<text>@customer.CustomerInfo.CustomerName</text>
					</a>
				}
				else
				{
					<a onclick="PopulateInactiveProjects('@customer.CustomerInfo.CustomerId', 0)" class="list-group-item" id="inactive-@customer.CustomerInfo.CustomerId">
						<text>@customer.CustomerInfo.CustomerName</text>
					</a>
				}
			}
		</div>
	</div>

	<div class="ovrd-panel panel ovrd-panel-info panel-info" style="position: relative">
		<div class="ovrd-panel-heading panel-heading">
			<h1 class="ovrd-panel-title panel-title">@Strings.Projects</h1>
		</div>
		<div class="ovrd-panel-body panel-body list-group" id="InactiveProjects">
			<!--inactive projects belong to chosen customer will be populated here-->
		</div>
	</div>
	@if ((bool)ViewData["IsManager"])
	{
		<div style="position: relative">
			<div class="pull-right">
				<button type="button" onclick="ReactivateCustomer()" class="ovrd-btn btn ovrd-btn-primary btn-primary" id="reactivateCustomerButton" title="Reactivate Customer"><i class="glyphicon glyphicon-plus"></i></button>
			</div>
		</div>
		<div style="position: relative">
			<div class="pull-right">
				<button type="button" onclick="ReactivateProject()" class="ovrd-btn btn ovrd-btn-primary btn-primary" id="reactivateProjectButton" title="Reactivate Project"><i class="glyphicon glyphicon-plus"></i></button>
			</div>
		</div>
	}
</div>